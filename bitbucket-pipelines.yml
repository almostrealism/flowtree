# You can specify a custom docker image from Dockerhub as your build environment
image: maven:3.3.3

pipelines:
  default:
    - step:
        script:
          # Common Dependencies
          - mvn --version
          - cd Common
          - mvn dependency:copy-dependencies
          
          # Common Compile
          - mkdir target/classes
          - cd src
          - find -name "*.java" > sources.txt
          - javac -cp "../target/dependency/*" -d ../target/classes @sources.txt
          - cd ../
          - mvn clean install
          
          
          # GraphPersist Dependencies
          - mvn --version
          - cd ../GraphPersist
          - mvn dependency:copy-dependencies
          - ls target/dependency
          
          # GraphPersist Compile
          - mkdir target/classes
          - cd src
          - find -name "*.java" > sources.txt
          - javac -cp "../target/dependency/*" -d ../target/classes @sources.txt
          - cd ../
          - mvn install
          
          
          # TreeView
          - cd ../TreeView
          - mvn install
          
          # MatrixView
          - cd ../MatrixView
          - mvn install
          
          # FlowTree
          - cd ../FlowTree
          - mvn install
          
          # Rings
          - cd ../Rings
          - mvn install
          
          # PhotonField
          - cd ../PhotonField
          - mvn install
          
          # Explorer
          - cd ../Explorer
          - mvn install
          
          # Replicator
          - cd ../Replicator
          - mvn install
          
          # FeedGrowth
          - cd ../FeedGrowth
          - mvn install